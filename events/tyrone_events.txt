namespace = company_events

company_events.1 = {
	type = country_event
    hidden = yes

	trigger = {
		any_company = {
			is_company_type = company_type:company_maison_worth
            company_is_prosperous = yes
		}
	    is_in_power_bloc = yes
	    is_power_bloc_leader = yes
	}

	immediate = {
		root.power_bloc ?= {
			add_modifier = {
				name = company_maison_worth_power_bloc_modifier
			}
		}
	}
}

company_events.2 = {
	type = country_event
    hidden = yes

	trigger = {
		any_company = {
			is_company_type = company_type:company_ludwig_moser_and_sons
            company_is_prosperous = yes
		}
	    is_in_power_bloc = yes
	    is_power_bloc_leader = yes
	}

	immediate = {
		root.power_bloc ?= {
			add_modifier = {
				name = company_ludwig_moser_and_sons_power_bloc_modifier
			}
		}
	}
}

company_events.3 = {
	type = country_event
    hidden = yes

	trigger = {
		any_company = {
			is_company_type = company_type:company_kinkozan_sobei
            company_is_prosperous = yes
		}
	    is_in_power_bloc = yes
	    is_power_bloc_leader = yes
	}

	immediate = {
		root.power_bloc ?= {
			add_modifier = {
				name = company_kinkozan_sobei_power_bloc_modifier_power_bloc_modifier
			}
		}
	}
}

company_events.4 = {
	type = country_event
    hidden = yes

	trigger = {
		any_company = {
			is_company_type = company_type:company_pedro_domecq
            company_is_prosperous = yes
		}
	    is_in_power_bloc = yes
	    is_power_bloc_leader = yes
	}

	immediate = {
		root.power_bloc ?= {
			add_modifier = {
				name = company_pedro_domecq_power_bloc_modifier
			}
		}
	}
}


namespace = kill_japanese_monarch

kill_japanese_monarch.1 = {
	type = country_event
    hidden = yes

    immediate = {
        random_scope_character  = {
            limit = {
                is_ruler = yes
            }
            kill_character = yes
        }
    }
}


namespace = HBC_disband


HBC_disband.1 = {
    type = country_event
    placement = root

    title = HBC_disband.1.t
    desc = HBC_disband.1.d
    flavor = HBC_disband.1.f

    event_image = {
        video = "ep1_power_blocs"
    }

    on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

    icon = "gfx/interface/icons/event_icons/event_map.dds"

    duration = 3

    trigger = {

    }

    immediate = {
		set_variable = annex_hbc
        c:HBC = {
            save_scope_as = HBC_country
        }
        c:GBR = {
            save_scope_as = company_country
        }
        c:QUE = {
            save_scope_as = LOWER_CANADA_country
        }
        c:ONT = {
            save_scope_as = UPPER_CANADA_country
        }
        company:company_hbc = {
            save_scope_as = HBC_company
        }
    }

    option = {
        name = HBC_disband.1.a
        default_option = yes
        trigger = {
            c:QUE = {
                exists = yes
				relations:root >= relations_threshold:cordial
            }
        }
        scope:LOWER_CANADA_country = {
            annex_with_incorporation = scope:HBC_country
        }
		custom_tooltip = {
			text = HBC_company_disbanded_TT
		}
		hidden_effect = {
			# Remove the Hudson Bay Company's ownership of the HBC country and then disband the company
			scope:HBC_country = {
				owning_company ?= {
					if = {
						limit = {
							is_company_type = company_type:company_hbc
						}
						remove_owned_country = scope:company_country
						owner ?= {
							remove_company = prev.type
						}
					}
				}
			}
		}
    }
    option = {
        name = HBC_disband.2.a
        default_option = yes
        trigger = {
            c:ONT = {
                exists = yes
				relations:root >= relations_threshold:cordial
            }
        }
        scope:UPPER_CANADA_country = {
            annex_with_incorporation = scope:HBC_country
        }
		custom_tooltip = {
			text = HBC_company_disbanded_TT
		}
		hidden_effect = {
			# Remove the Hudson Bay Company's ownership of the HBC country and then disband the company
			scope:HBC_country = {
				owning_company ?= {
					if = {
						limit = {
							is_company_type = company_type:company_hbc
						}
						remove_owned_country = scope:company_country
						owner ?= {
							remove_company = prev.type
						}
					}
				}
			}
		}
    }
}


namespace = austria_guide

# Matter of Hungary event, initiation event

austria_guide.1 = {
	type = country_event
	placement = root
	
	title = austria_guide.1.t
	desc = austria_guide.1.d
	flavor = austria_guide.1.f
	
	
	event_image = {
		video = "votp_monarch_holding_court"
	}
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	trigger = {
	}

	immediate = {
		save_scope_as = austria_scope
		c:HUN ?= {
			save_scope_as = hungary_scope
		}
	}

	option = {
		name = austria_guide.1.a
        default_option = yes
	}
	option = {
		name = austria_guide.1.b
	}
}

namespace = spain_guide

# Carlist Wars, initiation event

spain_guide.1 = {
	type = country_event
	placement = root
	
	duration = 3	
	
	title = spain_guide.1.t
	desc = spain_guide.1.d
	flavor = spain_guide.1.f
	
	
	event_image = {
		video = "europenorthamerica_before_the_battle"
	}
	
	cooldown = { days = normal_modifier_time }	
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	trigger = {
	}

	immediate = {
		save_scope_as = spain_scope
		c:SPC ?= {
			save_scope_as = carlist_scope
		}
	}

	option = {
		name = spain_guide.1.a
        default_option = yes
	}
	option = {
		name = spain_guide.1.b
		play_as = scope:carlist_scope
	}
}