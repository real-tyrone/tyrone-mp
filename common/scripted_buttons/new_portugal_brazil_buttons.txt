invade_brazil_button = {
	name = invade_brazil_button
	desc = invade_brazil_button_desc

	visible = {
		has_dlc_feature = rp1_content
		exists = c:BRZ
		NOT = {
			has_variable = invaded_brazil_var
		}
	}

	possible = {
		"c:BRZ.relations(root)" <= relations_threshold:hostile
		AND = {
			custom_tooltip = {
				text = por_power_greater_or_equal_brz_tt
				c:POR.prestige >= c:BRZ.prestige
				c:POR.naval_power_projection > c:BRZ.naval_power_projection
				c:POR.army_power_projection > c:BRZ.army_power_projection
			}
		}
		OR = {
			has_technology_researched = pan-nationalism
			AND = {
				ruler = {
					has_ideology = ideology:ideology_miguelist
				}
				has_technology_researched = nationalism				
			}
		}
	}
	selected = {
	}

	effect = {
		save_scope_as = portugal_scope
		set_variable = invaded_brazil_var
		if = {
			limit = {
				c:BRZ = {
					has_law = law_type:law_monarchy
				}
			}
			c:POR ?= {
				create_diplomatic_play = {
					target_state = s:STATE_RIO_DE_JANEIRO.region_state:BRZ
					type = dp_enforce_pu
				}
			}
		}
		else_if = {
			limit = {
				c:BRZ = {
					NOT = { has_law = law_type:law_monarchy }
				}
			}
			c:POR ?= {
				create_diplomatic_play = {
					target_state = s:STATE_RIO_DE_JANEIRO.region_state:BRZ
					type = dp_make_protectorate
				}
			}
		}
	}

	ai_chance = {
		value = 1
	}
}


je_portugal_and_brazil_abdicate_pedro_button = {
	name = je_portugal_and_brazil_abdicate_pedro_button
	desc = je_portugal_and_brazil_abdicate_pedro_button_desc

	visible = {
		has_dlc_feature = rp1_content
		exists = c:BRZ
		c:BRZ ?= {
			has_journal_entry = je_pedro_brazil
		}
		NOT = {
			has_variable = je_portugal_and_brazil_abdicate_pedro_button_var
		}
	}

	possible = {
		c:BRZ ?= {
			custom_tooltip = {
				text = ruled_by_pedro_tt
				ruler = {
					has_template = BRZ_emperor_pedro_02
				}
			}
		}
		AND = {
			"c:BRZ.relations(root)" > relations_threshold:amicable
			custom_tooltip = {
				text = por_prestige_greater_or_equal_brz_tt
				c:POR.prestige >= c:BRZ.prestige
			}
		}
		has_technology_researched = pan-nationalism
	}

	selected = {
	}

	effect = {
		save_scope_as = portugal_scope
		set_variable = je_portugal_and_brazil_abdicate_pedro_button_var
		c:BRZ ?= {
			trigger_event = { id = lusofonia.4 }
		}
	}

	ai_chance = {
		value = 1
	}
}

reclaim_portugal_button = {
	name = reclaim_portugal_button
	desc = reclaim_portugal_button_desc

	visible = {
		exists = c:POR
		NOT = {
			has_variable = invaded_portugal_var
		}
	}

	possible = {
		"relations(c:POR)" < -50
		AND = {
			custom_tooltip = {
				text = brz_power_greater_por_tt
				c:BRZ.prestige >= c:POR.prestige
				c:BRZ.naval_power_projection > c:POR.naval_power_projection
				c:BRZ.army_power_projection > c:POR.army_power_projection
			}
		}
		has_technology_researched = pan-nationalism
	}

	selected = {
	}

	effect = {
		save_scope_as = brazil_scope
		set_variable = invaded_portugal_var
		if = {
			limit = {
				c:POR = {
					has_law = law_type:law_monarchy
				}
			}
			c:BRZ ?= {
				create_diplomatic_play = {
					target_state = s:STATE_ESTREMADURA.region_state:POR
					type = dp_enforce_pu
				}
			}
		}
	}

	ai_chance = {
		value = 1
	}
}